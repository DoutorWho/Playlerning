{% extends '/componentes/base.html' %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='src/estilos/admin_partes.css') }}">
<script src="{{ url_for('static', filename='src/scripts/scripts/admin_partes.js') }}"></script>
{% endblock %}
{% block nav %}{% endblock %}
{% block footer %}{% endblock %}
{% block status %}{% endblock %}

{% block title %}Administrador{% endblock %} 
{% block body %}
{% if status == 'geral' %}
    <div class="container">
        <header>
            <h1>üéØ Painel de Administra√ß√£o</h1>
            <p class="description">Vis√£o geral do sistema: estat√≠sticas de usu√°rios, t√≥picos, coment√°rios e mais.</p>
        </header>

        <div class="info-grid">
            <div class="info-block">
                <h2>üë• Total de Usu√°rios</h2>
                <p class="stat-number">{{ dados['total_usuarios'] }}</p>
            </div>  
            <div class="info-block">
                <h2>üî® Usu√°rios Banidos</h2>
                <p class="stat-number">{{ dados['total_banidos'] }}</p>
            </div>
            <div class="info-block">
                <h2>üìö Total de T√≥picos</h2>
                <p class="stat-number">{{ dados['total_topicos'] }}</p>
            </div>
            <div class="info-block">
                <h2>üí¨ Total de Coment√°rios</h2>
                <p class="stat-number">{{ dados['total_comentarios'] }}</p>
            </div>
        </div>

        <div class="search-section">
            <h2>üîç Pesquisar Usu√°rio</h2>
            <p>Digite o nome de usu√°rio abaixo para verificar seu XP, rank, cargo e email.</p>
            <input type="text" id="searchUser" name="nomeUsuario" placeholder="Digite o nome do usu√°rio">
            <button onclick="pesquisarUsuarioGeral()">Pesquisar</button>

            <div class="informacoes_usuario" id="informacoes_usuario">
                <!-- Resultados da pesquisa de puni√ß√£o ser√£o mostrados aqui -->
                <p><strong>Cargo:</strong> <span id="cargo"></span></p>
                <p><strong>Rank:</strong> <span id="rank"></span></p>
                <p><strong>Email:</strong> <span id="email"></span></p>
                <p><strong>XP:</strong> <span id="xp"></span></p>
            </div>   
            <p class="mensagem_erro_usuario" id="mensagem_erro_usuario">N√£o existe esse usu√°rio</p>         
        </div>
    </div>
{% elif status == 'puni√ß√£o' %}
    <div class="container">
        <header>
            <h1>üî® Painel de Puni√ß√µes</h1>
            <p class="description">Gerenciamento de puni√ß√µes: banir usu√°rios e consultar status de puni√ß√µes.</p>
        </header>


        <form action="/banir-usuario-submit" class="section ban-section" method="post">
            <h2>Banir Usu√°rio</h2>
            <input type="text" name="forma"  id="banInput" placeholder="Nickname ou Email do usu√°rio" required>
            <br>
            <select name="motivo" id="banReason" class="banReason" required>
                <option value="" disabled selected>Selecione o Motivo do Banimento</option>
                <option value="Discurso De Odio">Discurso de √ìdio</option>
                <option value="Racismo">Racismo</option>
                <option value="Palavras Inapropriadas">Palavras Inapropriadas</option>
                <option value="Pl√°gio">Pl√°gio</option>
                <option value="Ass√©dio">Ass√©dio</option>
                <option value="Spam">Spam</option>
            </select>
            <br>
            <select name="status" id="status" class="status" required>
                <option value="" disabled selected>Selecione o Status do Banimento</option>
                <option value="permanente">Banimento Permanente</option>
                <option value="2_dias">Banimento por 2 dias</option>
                <option value="15_dias">Banimento por 15 dias</option>
                <option value="30_dias">Banimento por 30 dias</option>
                <option value="1_ano">Banimento por 1 ano</option>
            </select>
            <br>
            <input type="text" name="link"  id="punishmentLink" placeholder="Link da Prova de Puni√ß√£o" required>
            <button type="submit">Banir Usu√°rio</button>
        </form>

        <div class="search-section">
            <h2>üîç Pesquisar Status de Puni√ß√£o</h2>
            <p>Digite o nome de usu√°rio abaixo para verificar o status de puni√ß√£o.</p>
            <input type="text" id="searchPunishment" placeholder="Digite o nome do usu√°rio">
            <button onclick="VerificarPunicao()">Pesquisar</button>
            
            <p class="mensagem_erro_banimento" id="mensagem_erro_usuario">Este usu√°rio n√£o existe ou n√£o foi banido!</p>      
            <div class="punishment-info" id="punicao_status">
                <!-- Resultados da pesquisa de puni√ß√£o ser√£o mostrados aqui -->
                <p id="nome"> Jo√£o Silva</p>
                <p id="email">leandro@gmail.com</p>
                <p id="data">01/10/2024</p>
                <p id="status_mensagem">Permanente</p>
                <p id='motivo'>Uso de linguagem inapropriada</p>
                <p id='prova'> Link para a prova fornecida</p>

            </div>
        </div>
    </div>
{% elif status == "aprova√ß√£o" %}
    <div class="approve-teachers-container"></div>
        <header class="headeraprovar">
            <h1>üë©‚Äçüè´ Aprovar Professores</h1>
            <p class="description">Lista de professores aguardando aprova√ß√£o.</p>
        </header>

        <div class="teacher-list">
            <!-- A lista √©:  [{'nickname': 'Juliana', 'cargo': 'professor', 'email': 'juliana@gmail.com', 'senha': '123456789', 'curriculo': 'temp/curriculos/professor_1/TCC.docx'}] -->
            {% for informacao in dados %}
            <form action="/aprovarprofessor-submit"  method="post" class="teacher-item"> 
                <div class="teacher-info">
                    <p><strong>Nickname:</strong> {{ informacao['nickname'] }}</p>
                    <p><strong>Email:</strong> {{ informacao['email'] }} </p>
                    <p><strong>Curr√≠culo:</strong>
                    <a href="{{ url_for('static', filename=informacao['curriculo']) }}" class="curriculum" download>Baixar Curr√≠culo</a></p>
                </div>
                <input type="hidden"  name="email"  value="{{ informacao['email'] }}">
                <button type="submit" name="botao" class="approve-button" value="aprovar">Aprovar</button>
                <button type="submit" name="botao" class="reprove-button" value="reprovar">Reprovar</button>
            </form>
            {% endfor %}
            <!-- Adicione mais professores conforme necess√°rio -->  
        </div>
{% elif status == "adicionar_atividade" %}
<div class="add-activity-container">
    <section class="header">
        <h1>üìö Estat√≠sticas</h1>
        <p class="description">Escolha uma categoria para saber as est√°sticas e excluir Atividades.</p>
    </section>

    <div class="activity-stats">
        <div class="activity-box" onclick="location.href='/admin/todasatividades?secao=informatica'">
            <span>üíª</span>
            <h2>Inform√°tica</h2>
            <p id="quantidade_atividades_informatica">5 Atividades</p> <!-- Altere esse n√∫mero dinamicamente -->
        </div>
        <div class="activity-box" onclick="location.href='/admin/todasatividades?secao=enem'">
            <span>üìù</span>
            <h2>ENEM</h2>
            <p id="quantidade_atividades_enem">3 Atividades</p> <!-- Altere esse n√∫mero dinamicamente -->
        </div>
    </div>

    <section class="header">
        <h1>üìö Adicionar Atividades</h1>
        <p class="description">Escolha uma categoria e preencha os detalhes da atividade.</p>
    </section>

    <div class="activity-form">
        <label for="category">Selecione a Categoria:</label>
        <select id="category" onchange="updateForm()" required>
            <option value="" disabled selected>Escolha uma categoria</option>
            <option value="informatica">Inform√°tica</option>
            <option value="enem">ENEM</option>
        </select>

        <!-- Se√ß√£o Inform√°tica -->
        <div id="programming-section" class="hidden">
            <h2>Inform√°tica - L√≥gica de Programa√ß√£o</h2>
            <label for="unit">Unidade:</label>
            <input type="text" id="unit" placeholder="Ex: Unidade 1">

            <label for="programming-question">Pergunta:</label>
            <input type="text" id="programming-question" placeholder="Digite a pergunta">

            <label for="correct-answer">N√∫mero da Resposta Correta:</label>
            <input type="text" id="correct-answer" placeholder="Digite o n√∫mero da resposta correta">

            <h3>Respostas:</h3>
            <input type="text" class="answer" placeholder="Resposta 1">
            <input type="text" class="answer" placeholder="Resposta 2">
            <input type="text" class="answer" placeholder="Resposta 3">
            <input type="text" class="answer" placeholder="Resposta 4">
        </div>

        <!-- Se√ß√£o ENEM -->
        <div id="enem-section" class="hidden">
            <h2>ENEM</h2>
            <label for="subject">Disciplina:</label>
            <select id="subject" onchange="updateEnemFields()">
                <option value="" disabled selected>Escolha uma disciplina</option>
                <option value="humanas">Ci√™ncias Humanas</option>
                <option value="naturais">Ci√™ncias Naturais</option>
                <option value="matem√°tica">Matem√°tica</option>
                <option value="linguagens">Linguagens</option>
            </select>

            <label for="enem-unit">Unidade:</label>
            <input type="text" id="enem-unit" placeholder="Ex: Unidade 1">

            <label for="enem-question">Pergunta:</label>
            <input type="text" id="enem-question" placeholder="Digite a pergunta">

            <label for="enem-correct-answer">N√∫mero da Resposta Correta:</label>
            <input type="text" id="enem-correct-answer" placeholder="Digite o n√∫mero da resposta correta">

            <h3>Respostas:</h3>
            <input type="text" class="answer" placeholder="Resposta 1">
            <input type="text" class="answer" placeholder="Resposta 2">
            <input type="text" class="answer" placeholder="Resposta 3">
            <input type="text" class="answer" placeholder="Resposta 4">
        </div>

        <button onclick="addActivity()">Adicionar Atividade</button>
    </div>
</div>


{% endif %}
{% endblock %}